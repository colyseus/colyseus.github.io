---
import { Image, getImage } from 'astro:assets';
import { getOpenGraph } from "../../utils/getOpenGraphImage";

import ColyseusCloudSection from '../../components/ColyseusCloudSection.astro';
import TitleSection from '../../components/TitleSection.astro';
import MainLayout from '../../layouts/MainLayout.astro';
import CommunityStats from '../../components/CommunityStats.astro';
import JoinCommunitySection from '../../components/JoinCommunitySection.astro';

import playcanvasImage from "../../../public/learn/playcanvas.png";
import babylonjsImage from "../../../public/learn/babylonjs.png";
import phaserImage from "../../../public/learn/phaser.png";

const playcanvas = await getImage({src: playcanvasImage, formats: ['avif']});
const babylonjs = await getImage({src: babylonjsImage, formats: ['avif']});
const phaser = await getImage({src: phaserImage, formats: ['avif']});

const sampleProjects = [
  await getOpenGraph("https://github.com/colyseus/colyseus-examples", {
    title: "Basic Examples"
  }),

  await getOpenGraph("https://github.com/endel/colyseus-tic-tac-toe", {
    title: "Tic-Tac-Toe",
    description: "Multiplayer Tic-Tac-Toe demonstrating state synchronization. Client-side using PixiJS or Defold."
  }),

  await getOpenGraph("https://github.com/colyseus/demo-firebase-authentication", {
    title: "Firebase Auth Demo",
    description: "Authentication demonstration using Firebase"
  }),

  await getOpenGraph("https://github.com/colyseus/decentraland", {
    title: "Decentraland Scene"
  }),

  await getOpenGraph("https://github.com/endel/colyseus-0.15-protocol-buffers", {
    title: "Protocol Buffers Message Exchange",
    description: "Demonstrating Raw Binary Message Exchange"
  }),

  await getOpenGraph("https://github.com/colyseus/demo-push-to-talk", {
    title: "Push to Talk",
    description: `Simple "Push To Talk" proof of concept / example.`
  }),

  await getOpenGraph("https://github.com/endel/mazmorra", {
    title: "Full game: Mazmorra.io",
    description: "Online Multiplayer Dungeon Crawler / RPG"
  }),

  await getOpenGraph("https://github.com/colyseus/babylonjs-hide-and-seek", {
    title: "BabylonJS: Hide and Seek Demo",
    description: "Classic Hide and Seek multiplayer game with BabylonJS and the Graveyard asset pack from BabylonJS/Assets."
  }),

];

---

<MainLayout>

  <TitleSection separator={true}>Learn</TitleSection>

  <section class="">
    <div class="container container mx-auto relative py-14 ">
      <div class="flex justify-between gap-8">

        <div class="w-1/2">
          <h2 class="text-3xl font-medium">Framework Overview </h2>
          <p class="mb-4 text-gray-700">Endel's talk for JS GameDev Summit 2022, organized by <a href="https://gitnation.org/" target="_blank">GitNation</a>.</p>
          <iframe class="w-full h-72" src="https://www.youtube.com/embed/KnN6nRtfL44?start=260" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          <!-- <iframe class="w-full h-96" src="https://www.youtube.com/embed/KnN6nRtfL44?start=260" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe> -->
        </div>

        <div class="w-1/2">
          <h2 class="text-3xl font-medium">Tutorials</h2>
          <p class="mb-4 text-gray-700">How to use Colyseus with your favorite game engine or framework.</p>

          <div class="grid grid-cols-2 grid-row-2 mb-8 w-full gap-4">

            <a class="w-full flex rounded-lg bg-gray-100 border transition-all hover:bg-gray-200 hover:border-gray-400 active:bg-gray-300 active:border-gray-500 " target="_blank" href="https://learn.colyseus.io/phaser/">
              <span class="rounded-l-lg w-1/3 bg-cover bg-center" style=`background-image: url(${phaser.src})`></span>
              <span class="p-4 w-2/3">
                <h3 class="text-lg font-medium text-gray-800">Phaser</h3>
                <span class="text-gray-700">Real-time movement and player input</span>
              </span>
            </a>

            <a class="w-full flex rounded-lg bg-gray-100 border transition-all hover:bg-gray-200 hover:border-gray-400 active:bg-gray-300 active:border-gray-500 " target="_blank" href="https://developer.playcanvas.com/en/tutorials/real-time-multiplayer-colyseus/">
              <span class="rounded-l-lg w-1/3 bg-cover bg-center" style=`background-image: url(${playcanvas.src})`></span>
              <span class="p-4 w-2/3">
                <h3 class="text-lg font-medium text-gray-800">PlayCanvas</h3>
                <span class="text-gray-700">Setting up client-server communication</span>
              </span>
            </a>

            <a class="w-full flex rounded-lg bg-gray-100 border transition-all hover:bg-gray-200 hover:border-gray-400 active:bg-gray-300 active:border-gray-500 " target="_blank" href="https://doc.babylonjs.com/guidedLearning/networking/Colyseus">
              <span class="rounded-l-lg w-1/3 bg-cover bg-center" style=`background-image: url(${babylonjs.src})`></span>
              <span class="p-4 w-2/3">
                <h3 class="text-lg font-medium text-gray-800">BabylonJS</h3>
                <span class="text-gray-700">Setting up client-server communication</span>
              </span>
            </a>

          </div>

          <!-- <h2 class="text-3xl font-medium">How-to</h2>
          <p class="mb-4 text-gray-700">How to approach most common multiplayer use-cases.</p>
          Tutorials | Examples | Videos -->

        </div>

      </div>

    </div>
  </section>

  <div class="container mx-auto">
    <hr/>
  </div>

  <section class="mb-12">
    <div class="container container mx-auto relative py-14">
      <TitleSection>Sample Projects</TitleSection>

      <div class="grid grid-cols-2 grid-row-2 gap-4 mx-auto"> <!-- w-full lg:w-2/3 -->
        {(sampleProjects || []).map((project) => (
          <div class="w-full">
            <a
              class="w-full h-36 flex rounded-lg bg-gray-100 border transition-all hover:bg-gray-200 hover:border-gray-400 active:bg-gray-300 active:border-gray-500 "
              target="_blank"
              href={project.url}
            >
              <span class="rounded-l-lg w-1/3 bg-cover bg-center" style={`background-image: url(${project.image})`}></span>
              <span class="p-4 w-2/3 relative ">
                <h3 class="text-lg font-medium text-gray-800">{project.title}</h3>
                <span class="text-gray-700">{project.description}</span>
                <span class="absolute bottom-4 right-4">
                  <span class="rounded bg-gray-500 text-gray-100 p-1 text-xs">
                    GitHub
                    <svg class="ml-1 inline-block" fill="currentColor" height="1em" viewBox="0 0 512 512"><path d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"/></svg>
                  </span>
                </span>
              </span>
            </a>
          </div>
        ))}
      </div>
    </div>
  </section>

  <JoinCommunitySection />

</MainLayout>
