import{r as c}from"./index.ed373d49.js";var k={exports:{}},N={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T=c,F=Symbol.for("react.element"),D=Symbol.for("react.fragment"),M=Object.prototype.hasOwnProperty,q=T.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B={key:!0,ref:!0,__self:!0,__source:!0};function O(n,l,j){var a,m={},x=null,g=null;j!==void 0&&(x=""+j),l.key!==void 0&&(x=""+l.key),l.ref!==void 0&&(g=l.ref);for(a in l)M.call(l,a)&&!B.hasOwnProperty(a)&&(m[a]=l[a]);if(n&&n.defaultProps)for(a in l=n.defaultProps,l)m[a]===void 0&&(m[a]=l[a]);return{$$typeof:F,type:n,key:x,ref:g,props:m,_owner:q.current}}N.Fragment=D;N.jsx=O;N.jsxs=O;k.exports=N;var e=k.exports;function H(n){return e.jsxs("div",{className:"flex flex-cols items-center space-x-4 min-w-",children:[e.jsxs("div",{className:"font-medium text-base",children:["$",n.price,e.jsx("small",{children:"/mo"})]}),e.jsxs("div",{children:[e.jsx("h4",{children:n.location.description}),e.jsxs("p",{children:[n.numInstances>1?e.jsxs("span",{className:"text-semibold",children:[n.numInstances,"x "]}):"",n.plan.description]})]})]})}function W({title:n="Pricing Simulator"}){const[l,j]=c.useState([]),[a,m]=c.useState([]),[x,g]=c.useState({none:"Loading..."}),[S,E]=c.useState([{id:"none",region_code:"none",description:"Loading..."}]),[p,_]=c.useState(""),[o,v]=c.useState(""),[h,f]=c.useState(1),[u,w]=c.useState("vertical"),[b,I]=c.useState([]),[C,U]=c.useState([]);c.useEffect(()=>{fetch("https://cloud-prod.colyseus.io/api/prices").then(s=>{s.json().then(t=>{m(t.plans),E(t.locations);const i={};t.plans.forEach(d=>{i[d.tier]||(i[d.tier]=d.tier)}),j(i);const r={};t.locations.forEach(d=>{r[d.region_code]||(r[d.region_code]=d.region)}),g(r)})})},[]);const R=s=>{_(s.target.value);const t=a.filter(i=>i.locations.indexOf(s.target.value)>=0)[0];t&&v(t.id)},$=s=>{v(s.target.value)},L=s=>{s.target.value==="vertical"?f(1):h===1&&f(2),w(s.target.value)},z=s=>{f(s.target.value)},y=s=>{const i=a.find(r=>r.id===o).cpu_count*s*h;return`CCU: ${i} · DAU: ${(i*4*24).toLocaleString()} · MAU: ${(i*4*24*30).toLocaleString()}`},P=()=>{if(!o)return 0;const s=a.find(r=>r.id===o),t=a.find(r=>s.tier===r.tier);return s.price*h+(u==="horizontal"?100+t.price:0)},A=()=>{U([...C,p]),I([...b,{location:S.find(s=>s.id===p),plan:a.find(s=>s.id===o),numInstances:h,scaleStrategy:u,price:P()}]),_(""),v(""),f(1),w("vertical")};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl text-center",children:n}),e.jsxs("div",{className:"flex flex-col mt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"font-semibold block",children:"Location"}),e.jsxs("select",{className:"border p-3 rounded",onChange:R,placeholder:"Select a location",value:p,children:[e.jsx("option",{className:"hidden",value:"",children:"Select a location"}),Object.keys(x).map(s=>e.jsx("optgroup",{label:x[s],children:S.filter(t=>t.region_code===s).map(t=>e.jsx("option",{value:t.id,disabled:C.indexOf(t.id)>=0,children:t.description},t.id))},s))]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"font-semibold block",children:"Plan"}),e.jsx("select",{disabled:!p,className:"border p-3 rounded disabled:bg-gray-100",onChange:$,value:o,placeholder:"Select plan",children:p?Object.keys(l).map(s=>e.jsx("optgroup",{label:s,children:a.filter(t=>t.tier===s&&t.locations.indexOf(p)>=0).map(t=>e.jsx("option",{value:t.id,children:t.description},t.id))},s)):e.jsx("option",{className:"hidden",children:"Select plan"})})]}),e.jsxs("div",{className:"space-y-1 text-sm md:text-base",children:[e.jsx("span",{className:"font-semibold block",children:"Scale strategy"}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",onChange:L,checked:u==="vertical",name:"scale_strategy",id:"scale_vertical",value:"vertical",className:"mr-2"}),e.jsx("label",{htmlFor:"scale_vertical",children:"Single instance - Scale vertically"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",onChange:L,checked:u==="horizontal",name:"scale_strategy",id:"scale_horizontal",value:"horizontal",className:"mr-2"}),e.jsxs("label",{htmlFor:"scale_horizontal",children:[e.jsx("span",{className:"bg-blue-600 text-white p-1 text-xs rounded shadow",children:"Coming soon"})," Cluster - Scale horizontally ",e.jsxs("span",{className:"text-blue-600",children:["(+$100",e.jsx("small",{children:"/mo"}),")"]})]}),e.jsxs("div",{className:`scaling-num-instances col-span-2 pb-4 my-4 ${u!=="horizontal"?"hidden":""}`,children:[e.jsx("label",{className:"font-semibold block",children:"Number of instances"}),e.jsx("input",{type:"range",onInput:z,value:h,min:"1",max:"12",className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1 px-1",children:[e.jsx("span",{className:"pl-0.5 ",children:"1"}),e.jsx("span",{className:" w-2",children:"2"}),e.jsx("span",{className:" w-2",children:"3"}),e.jsx("span",{className:" w-2",children:"4"}),e.jsx("span",{className:" w-2",children:"5"}),e.jsx("span",{className:" w-2",children:"6"}),e.jsx("span",{className:" w-2",children:"7"}),e.jsx("span",{className:" w-2",children:"8"}),e.jsx("span",{className:" w-2",children:"9"}),e.jsx("span",{className:" w-2",children:"10"}),e.jsx("span",{className:" w-2",children:"11"}),e.jsx("span",{className:"pr-0.5 w-2",children:"12"})]})]})]})]})]}),e.jsxs("button",{onClick:A,disabled:!o,className:"block mt-4 w-full rounded p-4 text-white bg-blue-600 transition-all hover:bg-blue-700 active:bg-blue-800 disabled:bg-gray-400",children:["Add location: $",P(),e.jsx("small",{children:"/mo"})]}),o?e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"text-xs md:text-base col-span-2 text-sm text-slate-100 bg-gray-600 rounded-xl p-4 ",children:[e.jsx("label",{className:"inline-block text-white font-medium mb-1",children:"Capacity estimation"}),e.jsxs("p",{className:"capacity-estimation","data-template":"",children:[e.jsx("span",{className:"font-medium text-red-500",children:"High CPU Usage"}),e.jsxs("span",{children:[" · ",y(80)]}),e.jsx("br",{}),e.jsx("span",{className:"font-medium text-yellow-500",children:"Moderate CPU Usage"}),e.jsxs("span",{children:[" · ",y(500)]}),e.jsx("br",{}),e.jsx("span",{className:"font-medium text-green-500",children:"Minimal CPU Usage"}),e.jsxs("span",{children:[" · ",y(3e3)]})]}),e.jsx("p",{className:"text-xs mt-1 text-slate-300",children:"* The actual capacity may be higher or lower than estimated, depending on the actual CPU usage of your room's code."})]})}):null,b.length>0?e.jsxs("div",{children:[e.jsx("div",{className:"border-t border-gray-300 mt-6 pt-6 space-y-3 text-sm",children:b.map((s,t)=>e.jsx(H,{...s},t))}),e.jsxs("div",{className:"border-t border-gray-300 mt-6 pt-6 font-medium text-xl text-center",children:["Total: $",b.reduce((s,t)=>s+t.price,0),e.jsx("small",{children:"/mo"})]})]}):null]})}export{W as default};
